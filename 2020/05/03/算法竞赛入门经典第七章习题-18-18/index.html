<!DOCTYPE HTML>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ç¬¬ä¸ƒç« ä¹ é¢˜(18/18) | è“çµåšå®¢</title>
  <meta name="author" content="Ghost_LZW">
  
  <meta name="description" content="è“çµåšå®¢ä¸ºGhost_LZWçš„åšå®¢,acmer,code,soullan.com is a blog in order to record my learning and growth">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ç¬¬ä¸ƒç« ä¹ é¢˜(18/18)"/>
  <meta property="og:site_name" content="è“çµåšå®¢"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="è“çµåšå®¢" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-134518650-1', 'auto');
  ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?f5b3b5dfc13e08e896e4bd5b5f03ab28";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

 <body>  
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">è“çµåšå®¢</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ç¬¬ä¸ƒç« ä¹ é¢˜(18/18)</h1>
		</div>
	



<script type="text/x-mathjax-config">
	MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
			tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
			TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
			messageStyle: "none"
	}); 
</script>
<script type="text/x-mathjax-config">
	MathJax.Hub.Queue(function() {
			var all = MathJax.Hub.getAllJax(), i;
			for(i=0; i < all.length; i += 1) {
					all[i].SourceElement().parentNode.className += ' has-jax';
			}
	});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async>
</script>

<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <p>é¢˜è§£éƒ½èƒ½å†™åğŸ¤®</p>
<p>ä¸‹æ¬¡æˆ‘ä¸€å®šè¾¹åšé¢˜è¾¹å†™é¢˜è§£</p>
<p>gogogoï¼Œç¬¬ä¹ç« å°±åœ¨çœ¼å‰</p>
<a id="more"></a>
<h2 id="firetruck">Firetruck</h2>
<p><a href="https://vjudge.net/problem/UVA-208" target="_blank" rel="noopener">UVA - 208</a></p>
<p>é¢˜æ„ï¼šè¾“å…¥nä¸ªèŠ‚ç‚¹çš„æ— å‘å›¾ï¼Œå’ŒèŠ‚ç‚¹kï¼ŒæŒ‰å­—å…¸åºè¾“å‡ºä»èŠ‚ç‚¹1åˆ°èŠ‚ç‚¹kçš„æ‰€æœ‰è·¯å¾„</p>
<p>é¢˜è§£ï¼šæš´åŠ›æœç´¢å³å¯, æå‰åˆ¤æ–­èŠ‚ç‚¹èƒ½å¦åˆ°è¾¾1ï¼Œå¦åˆ™ä¼šTï¼Œ pdfæ ·ä¾‹æœ‰è¯¯ï¼Œ çœ‹udebug</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: XeroxAuto</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-03 21:03:11</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Debug: "</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">30</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, fa[Ma];</span><br><span class="line"><span class="keyword">bool</span> g[Ma][Ma];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;<span class="keyword">return</span> fa[u] = fa[u] == u ? u : find(fa[u]);&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unio</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> p1 = find(a), p2 = find(b);</span><br><span class="line">	<span class="keyword">if</span> (p1 == p2) <span class="keyword">return</span> ;</span><br><span class="line">	fa[p2] = p1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[Ma], inn[Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	rep (i, Ma) fa[i] = i, inn[i] = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">memset</span>(g, <span class="number">0</span>, <span class="keyword">sizeof</span> g);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> cur, <span class="keyword">const</span> <span class="keyword">int</span>&amp; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (u == v) &#123;</span><br><span class="line">		rep (i, cur)</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, v);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	inn[u] = <span class="number">1</span>; <span class="keyword">int</span> cnt = <span class="number">0</span>; ans[cur] = u;</span><br><span class="line">	rep (i, Ma) <span class="keyword">if</span> (g[u][i] <span class="keyword">and</span> !inn[i])</span><br><span class="line">		cnt += dfs(i, cur + <span class="number">1</span>,  v);</span><br><span class="line">	inn[u] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (find(<span class="number">1</span>) != find(n)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> dfs(<span class="number">1</span>, <span class="number">0</span>, n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>) &#123;</span><br><span class="line">		init();</span><br><span class="line">		<span class="keyword">int</span> u, v;</span><br><span class="line">		<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u, &amp;v) == <span class="number">2</span> <span class="keyword">and</span> u)</span><br><span class="line">			g[u][v] = g[v][u] = <span class="literal">true</span>, unio(u, v);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"CASE %d:\n"</span>, ++k);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"There are %d routes from the firestation to streetcorner %d.\n"</span>, solve(), n);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="golygons">Golygons</h2>
<p><a href="https://vjudge.net/problem/UVA-225" target="_blank" rel="noopener">UVA - 225</a></p>
<p>é¢˜æ„ï¼šç¬¬ä¸€æ­¥èµ°ä¸€æ­¥ï¼Œç¬¬äºŒæ­¥èµ°ä¸¤æ­¥..... è®©ä½ èµ°å‡ºä¸€ä¸ªå¤šè¾¹å½¢ï¼ŒæŒ‰å­—å…¸åºè¾“å‡ºæ–¹æ¡ˆï¼Œ å›¾åƒå¯ä»¥è‡ªäº¤ï¼Œ ä½†ä¸èƒ½ç»è¿‡éšœç¢ç‚¹ï¼Œ ä¸”åªèƒ½è½¬90åº¦</p>
<p>é¢˜è§£ï¼šæ³¨æ„æ¡ä»¶ï¼Œdfså³å¯, å¯ç”¨ä½è¿ç®—è¿›è¡Œä¸€äº›ç»†èŠ‚ä¼˜åŒ–</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-07 09:29:40</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Debug: "</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> <span class="keyword">int</span> x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">120</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, ans[Ma * <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[Ma * <span class="number">2</span>][Ma * <span class="number">2</span>], mz[Ma * <span class="number">2</span>][Ma * <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">	<span class="built_in">memset</span>(mz, <span class="number">0</span>, <span class="keyword">sizeof</span> mz);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;,</span><br><span class="line">		  dy[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> aim[] = &#123;<span class="string">'e'</span>, <span class="string">'n'</span>, <span class="string">'s'</span>, <span class="string">'w'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> xx, <span class="keyword">int</span> yy, <span class="keyword">int</span> dir, <span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (mz[x + Ma][y + Ma] <span class="keyword">or</span> mz[xx + Ma][yy + Ma]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> ((xx != <span class="number">0</span> <span class="keyword">or</span> yy != <span class="number">0</span> <span class="keyword">or</span> cur + <span class="number">1</span> != n) <span class="keyword">and</span> vis[xx + Ma][yy + Ma])</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">while</span> (!(x == xx <span class="keyword">and</span> y == yy)) &#123;</span><br><span class="line">		x += dx[dir], y += dy[dir];</span><br><span class="line">		<span class="keyword">if</span> (mz[x + Ma][y + Ma]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> pre)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t = now ^ pre;</span><br><span class="line">	<span class="keyword">return</span> t != <span class="number">3</span> <span class="keyword">and</span> t != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (cur == n) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!(x == <span class="number">0</span> <span class="keyword">and</span> y == <span class="number">0</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		rep (i, cur) <span class="built_in">cout</span> &lt;&lt; aim[ans[i]]; <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>; vis[x + Ma][y + Ma] = <span class="literal">true</span>;</span><br><span class="line">	rep (i, <span class="number">4</span>) <span class="keyword">if</span> (!cur <span class="keyword">or</span> check(i, ans[cur - <span class="number">1</span>])) &#123;</span><br><span class="line">		<span class="keyword">int</span> nx = x + dx[i] * (cur + <span class="number">1</span>), ny = y + dy[i] * (cur + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span> (!judge(x, y, nx, ny, i, cur)) <span class="keyword">continue</span>;</span><br><span class="line">		ans[cur] = i;</span><br><span class="line">		cnt += dfs(nx, ny, cur + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	vis[x + Ma][y + Ma] = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==0</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> T; <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">	<span class="keyword">while</span> (T--) &#123;</span><br><span class="line">		<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">		init(); <span class="keyword">int</span> x, y;</span><br><span class="line">		rep (i, m) &#123;</span><br><span class="line">			<span class="built_in">cin</span> &gt;&gt; x &gt;&gt; y;</span><br><span class="line">			mz[x + Ma][y + Ma] = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> t = dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Found "</span> &lt;&lt; t &lt;&lt; <span class="string">" golygon(s)."</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="the-domino-effect">The Domino Effect</h2>
<p><a href="https://vjudge.net/problem/UVA-211" target="_blank" rel="noopener">UVA - 211</a></p>
<p>é¢˜æ„ï¼šè®©ä½ æŠŠå¤šç±³è¯ºæ”¾åœ¨ç»™å‡ºæ£‹ç›˜ä¸­çš„æ–¹æ¡ˆï¼Œåœ¨å¯¹åº”æ ¼å­ä¸­å†™å…¥ç›¸åº”ç¼–å·</p>
<p>é¢˜è§£ï¼šç›´æ¥æœç´¢å³å¯ï¼Œæ³¨æ„è¾“å‡º</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-08 09:45:01</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">10</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">spe</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">"\n\n\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> mz[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	rep (i, <span class="number">7</span>) rep (j, <span class="number">8</span>)</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;mz[i][j]) != <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	rep (i, <span class="number">7</span>) &#123;</span><br><span class="line">		rep (j, <span class="number">8</span>) <span class="built_in">printf</span>(<span class="string">"   %d"</span>, mz[i][j]);</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[Ma * Ma], bone[Ma][Ma];</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">30</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	rep (i, <span class="number">7</span>) fep (j, i, <span class="number">7</span>)</span><br><span class="line">		bone[i][j] = bone[j][i] = ++cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> ngo[] = &#123;<span class="number">1</span>, <span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">gmz</span><span class="params">(<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> mz[t / <span class="number">8</span>][t % <span class="number">8</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> nex)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (nex &gt;= <span class="number">7</span> * <span class="number">8</span> <span class="keyword">or</span> ans[nex]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (nex - <span class="number">1</span> == now) <span class="keyword">return</span> now / <span class="number">8</span> == nex / <span class="number">8</span>  <span class="keyword">and</span></span><br><span class="line">						!vis[bone[gmz(now)][gmz(nex)]];</span><br><span class="line">	<span class="keyword">return</span> now / <span class="number">8</span> + <span class="number">1</span> == nex / <span class="number">8</span> <span class="keyword">and</span></span><br><span class="line">		   !vis[bone[gmz(now)][gmz(nex)]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (now == <span class="number">7</span> * <span class="number">8</span>) &#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">		rep (i, <span class="number">7</span>) &#123;</span><br><span class="line">			rep (j, <span class="number">8</span>) <span class="built_in">printf</span>(<span class="string">"  %2d"</span>, ans[i * <span class="number">8</span> + j]);</span><br><span class="line">			<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">		&#125; <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*if (now == 38) &#123;</span></span><br><span class="line"><span class="comment">	   	debug(ans[38], ans[30]);</span></span><br><span class="line"><span class="comment">		debug(gmz(38), gmz(30));</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">	<span class="keyword">if</span> (ans[now]) <span class="keyword">return</span> dfs(now + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	rep (i, <span class="number">2</span>) <span class="keyword">if</span> (judge(now, now + ngo[i])) &#123;</span><br><span class="line">		ans[now] = ans[now + ngo[i]] = bone[gmz(now)][gmz(now + ngo[i])];</span><br><span class="line">		vis[ans[now]] = <span class="literal">true</span>;</span><br><span class="line">		cnt += dfs(now + <span class="number">1</span>);</span><br><span class="line">		vis[ans[now]] = <span class="literal">false</span>;</span><br><span class="line">		ans[now] = ans[now + ngo[i]] = <span class="number">0</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	init();</span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (read()) &#123;</span><br><span class="line">		<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">		<span class="keyword">if</span> (k) spe();</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Layout #%d:\n\n"</span>, ++k);</span><br><span class="line">		print();</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Maps resulting from layout #%d are:\n"</span>, k);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\nThere are %d solution(s) for layout #%d.\n"</span>, dfs(<span class="number">0</span>), k);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="cutting-chains">Cutting Chains</h2>
<p><a href="https://vjudge.net/problem/UVA-818" target="_blank" rel="noopener">UVA - 818</a></p>
<p>é¢˜æ„ï¼šç»™ä½ å‡ ä¸ªåœ†ç¯ï¼Œè®©ä½ å‰ªå¼€å…¶ä¸­çš„å‡ ä¸ªï¼Œå†æ¥ä¸Šï¼Œä½¿å¾—æ‰€æœ‰åœ†ç¯è¿æˆä¸€æ¡é“¾</p>
<p>é¢˜è§£ï¼šida*æœç´¢æ‰“å¼€çš„åœ†ç¯ï¼Œåˆ¤ä¸‹æ˜¯å¦æœ‰ç¯è¿æ¥å¤šä½™ä¸¤ä¸ªç¯ï¼Œæš´åŠ›åˆ¤æ˜¯å¦æˆé“¾ï¼Œæœ€åçœ‹æœ€ç»ˆè¿é€šå—æ˜¯å¦å¤šäºæ‰“å¼€åœ†ç¯æ•°åŠ ä¸€</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-09 15:31:37</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; <span class="string">"Debug: "</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> state(x) (1&lt;&lt;(x))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">20</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> g[Ma][Ma];</span><br><span class="line"><span class="keyword">int</span> mark[Ma], n;</span><br><span class="line"><span class="keyword">bool</span> vis[Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">	<span class="keyword">if</span> (!n) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">int</span> a, b;</span><br><span class="line">	<span class="built_in">memset</span>(g, <span class="number">0</span>, <span class="keyword">sizeof</span> g);</span><br><span class="line">	<span class="built_in">memset</span>(mark, <span class="number">0</span>, <span class="keyword">sizeof</span> mark);</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b) &#123;</span><br><span class="line">		<span class="keyword">if</span> (a &lt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">		--a, --b;</span><br><span class="line">		g[a][b] = g[b][a] = <span class="literal">true</span>;</span><br><span class="line">		mark[a] |= state(b);</span><br><span class="line">		mark[b] |= state(a);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span> <span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> fa, <span class="keyword">int</span> open)</span> </span>&#123;</span><br><span class="line">	vis[u] = <span class="literal">true</span>;</span><br><span class="line">	rep (i, n) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((open &gt;&gt; i) &amp; <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> (g[u][i] == <span class="number">0</span> <span class="keyword">or</span> i == fa) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> (vis[i] <span class="keyword">or</span> dfs(i, u, open)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> open)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((open &gt;&gt; i) &amp; <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">int</span> t = mark[i] ^ (mark[i] &amp; open);</span><br><span class="line">		<span class="comment">//debug(t);</span></span><br><span class="line">		<span class="keyword">if</span> (__builtin_popcount(t) &gt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">	rep (i, n) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((open &gt;&gt; i) &amp; <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">			<span class="keyword">if</span> (dfs(i, <span class="number">-1</span>, open)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">			++cnt;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//debug(cnt, open, __builtin_popcount(open));</span></span><br><span class="line">	<span class="keyword">return</span> __builtin_popcount(open) &gt;= cnt - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> d, <span class="keyword">const</span> <span class="keyword">int</span>&amp; maxd, <span class="keyword">int</span> open, <span class="keyword">int</span> pre)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (d == maxd) &#123;</span><br><span class="line">		<span class="keyword">return</span> check(open);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (pre + d &lt; maxd) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">for</span> (; pre &gt;= <span class="number">0</span>; --pre) &#123;</span><br><span class="line">		<span class="keyword">if</span> (dfs(d + <span class="number">1</span>, maxd, open | state(pre), pre)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==0</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (read()) &#123;</span><br><span class="line">		<span class="keyword">int</span> maxd;</span><br><span class="line">		<span class="keyword">for</span> (maxd = <span class="number">0</span>; !dfs(<span class="number">0</span>, maxd, <span class="number">0</span>, n); ++maxd);</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Set "</span> &lt;&lt; ++k &lt;&lt; <span class="string">": Minimum links to open is "</span> &lt;&lt; maxd &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="pipeline-scheduling">Pipeline Scheduling</h2>
<p><a href="https://vjudge.net/problem/UVA-690" target="_blank" rel="noopener">UVA - 690</a></p>
<p>é¢˜æ„ï¼šä½ æœ‰äº”ä¸ªå·¥ä½œå•å…ƒï¼Œå’Œ10ä¸ªç¨‹åºï¼Œæ¯ä¸ªç¨‹åºéœ€è¦nä¸ªæ—¶é—´ç‰‡æ¥å®Œæˆï¼ŒåŒæ—¶ç»™å‡ºäº†æ¯ä¸ªæ—¶é—´ç‰‡éœ€è¦çš„å•å…ƒï¼ŒåŒä¸€ä¸ªå·¥ä½œå•å…ƒä¸èƒ½æ‰§è¡Œå¤šäºä¸€ä¸ªç¨‹åºï¼Œé—®ä½ æ‰§è¡Œå®Œæ‰€æœ‰ç¨‹åºæœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ—¶é—´ç‰‡</p>
<p>é¢˜è§£ï¼šé¢„å¤„ç†å¯ä»¥å®‰å…¨çš„æ—¶é—´é—´éš”ï¼Œæœç´¢æ—¶è¿›è¡Œcheckï¼Œå½“ç”¨æœ€å°æ—¶é—´é—´éš”ä¹Ÿæ— æ³•ä¼˜äºç­”æ¡ˆæ—¶è¿›è¡Œæœ€ä¼˜æ€§å‰ªæ</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-14 14:39:43</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> state(x) (1&lt;&lt;(x))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">25</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> mz[<span class="number">6</span>][Ma];</span><br><span class="line"><span class="keyword">int</span> mark[<span class="number">5</span>], ans;</span><br><span class="line"><span class="keyword">int</span> jump[Ma], cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> *t, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">	rep (i, <span class="number">5</span>) <span class="keyword">if</span> ((t[i] &gt;&gt; k) &amp; mark[i]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cnt = <span class="number">0</span>;</span><br><span class="line">	rep (i, <span class="number">5</span>) &#123;</span><br><span class="line">		mark[i] = <span class="number">0</span>;</span><br><span class="line">		rep (j, n) <span class="keyword">if</span> (mz[i][j] == <span class="string">'X'</span>)</span><br><span class="line">			mark[i] |= state(j);</span><br><span class="line">	&#125;</span><br><span class="line">	ans = inf;</span><br><span class="line">	rep (i, n + <span class="number">1</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (judge(mark, i)) jump[cnt++] = i;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>* te, <span class="keyword">int</span> d, <span class="keyword">int</span> tot)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (tot + jump[<span class="number">0</span>] * (<span class="number">10</span> - d) &gt; ans) <span class="keyword">return</span> ;</span><br><span class="line">	<span class="keyword">if</span> (d == <span class="number">10</span>) &#123;</span><br><span class="line">		cmin(ans, tot);</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	rep (i, cnt) &#123;</span><br><span class="line">		<span class="keyword">if</span> (judge(te, jump[i])) &#123;</span><br><span class="line">			<span class="keyword">int</span> temp[<span class="number">5</span>];</span><br><span class="line">			rep (j, <span class="number">5</span>) temp[j] = (te[j] &gt;&gt; jump[i]) | mark[j];</span><br><span class="line">			dfs(temp, d + <span class="number">1</span>, tot + jump[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> <span class="keyword">and</span> n) &#123;</span><br><span class="line">		rep (i, <span class="number">5</span>) <span class="built_in">scanf</span>(<span class="string">"%s"</span>, mz[i]);</span><br><span class="line">		init();</span><br><span class="line">		dfs(mark, <span class="number">1</span>, n);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">```	</span><br><span class="line">&lt;/details&gt;</span><br><span class="line"></span><br><span class="line">## Overlapping Squares</span><br><span class="line"></span><br><span class="line">[UVA - <span class="number">12113</span>](https:<span class="comment">//vjudge.net/problem/UVA-12113)</span></span><br><span class="line"></span><br><span class="line">é¢˜æ„ï¼šé—®ä½ èƒ½å¦ç”¨<span class="number">2</span>*<span class="number">2</span>çš„æ–¹å—å †å‡ºç»™å‡ºå›¾å½¢</span><br><span class="line"></span><br><span class="line">é¢˜è§£ï¼š<span class="number">4</span>*<span class="number">4</span>ä¸­æ”¾ç½®<span class="number">2</span> * <span class="number">2</span>çš„æ–¹å—åªæœ‰<span class="number">9</span>ç§æ–¹æ¡ˆï¼Œæš´åŠ›æœç´¢å³å¯, æ³¨æ„æ”¾ç½®<span class="number">2</span> * <span class="number">2</span>æ–¹å—æ—¶çš„è¦†ç›–ï¼Œæœ‰äº›ä¸ä¸€æ ·ï¼Œæäº†å¥½ä¹…æ‰æ˜ç™½</span><br><span class="line"></span><br><span class="line">&lt;details&gt;</span><br><span class="line">&lt;summary&gt;code&lt;/summary&gt;</span><br><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-14 19:45:03</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line">#define GOODOJ</span><br><span class="line">#define SYNC <span class="number">0</span></span><br><span class="line"></span><br><span class="line">#ifdef GOODOJ</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">#include &lt;ext/pb_ds/priority_queue.hpp&gt;</span><br><span class="line">#include &lt;ext/pb_ds/assoc_container.hpp&gt;</span><br><span class="line">#include &lt;ext/pb_ds/tree_policy.hpp&gt;</span><br><span class="line">#include &lt;ext/rope&gt;</span><br><span class="line">#include &lt;chrono&gt;</span><br><span class="line">#include &lt;random&gt;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#include &lt;<span class="built_in">set</span>&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;<span class="built_in">string</span>&gt;</span><br><span class="line">#include &lt;<span class="built_in">map</span>&gt;</span><br><span class="line">#include &lt;<span class="built_in">deque</span>&gt;</span><br><span class="line">#include &lt;<span class="built_in">vector</span>&gt;</span><br><span class="line">#include &lt;limits&gt;</span><br><span class="line">#include &lt;cassert&gt;</span><br><span class="line">#include &lt;sstream&gt;</span><br><span class="line">#include &lt;iterator&gt;</span><br><span class="line">#include &lt;functional&gt;</span><br><span class="line">#endif</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">#define <span class="built_in">endl</span> <span class="string">'\n'</span></span><br><span class="line">#define fep(i,b,e) <span class="keyword">for</span>(<span class="keyword">int</span> i=(b);i&lt;(e);++i)</span><br><span class="line">#define rep(i,x) <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(x);++i)</span><br><span class="line">#define rap(i,x) <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; i : (x))</span><br><span class="line">#define seg(t) (t).begin(), (t).end()</span><br><span class="line">#define ep emplace_back</span><br><span class="line">#define mkp make_pair</span><br><span class="line">#define qxx(i,x) <span class="keyword">for</span>(<span class="keyword">int</span> i = head[x]; ~i; i = node[i].nex)</span><br><span class="line">#define F first</span><br><span class="line">#define S second</span><br><span class="line">#define lowbit(x) ((-(x))&amp;(x))</span><br><span class="line">#define RE <span class="keyword">register</span></span><br><span class="line">#define getchar() getchar_unlocked()</span><br><span class="line">#ifdef DEBUG</span><br><span class="line"><span class="keyword">void</span> err(istream_iterator&lt;<span class="built_in">string</span>&gt;)&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="keyword">void</span> err(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args) &#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line">#define debug(args...) &#123;<span class="built_in">string</span> _s=#args;replace(seg(_s),<span class="string">','</span>,<span class="string">' '</span>);\</span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="built_in">istringstream</span> it(_s);\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#define debug(...)</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> cmax(T&amp; a,<span class="keyword">const</span> T&amp; b) &#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> cmin(T&amp; a,<span class="keyword">const</span> T&amp; b) &#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line">#ifdef GOODOJ</span><br><span class="line">mt19937 rng((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count());</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line">#endif</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line">struct point &#123; db x ,y;&#125;;</span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">int</span> sign(db a) &#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line">#define dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span><br><span class="line">#define cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span><br><span class="line">#define crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">20</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> mz[Ma][Ma], ju[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> input() &#123;</span><br><span class="line">	rep (i, <span class="number">5</span>) &#123;</span><br><span class="line">		fgets(mz[i], Ma * Ma, <span class="built_in">stdin</span>);</span><br><span class="line">		<span class="keyword">if</span> (mz[i][<span class="number">0</span>] == <span class="string">'0'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">memset</span>(ju, <span class="string">' '</span>, <span class="keyword">sizeof</span> ju);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> judge() &#123;</span><br><span class="line">	rep (i, <span class="number">5</span>) rep (j, <span class="number">9</span>)</span><br><span class="line">		<span class="keyword">if</span> (ju[i][j] != mz[i][j]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> print() &#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"------------------"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	rep (i, <span class="number">5</span>) ju[i][Ma - <span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">	rep (i, <span class="number">5</span>) <span class="built_in">cout</span> &lt;&lt; ju[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> full(<span class="keyword">int</span> r, <span class="keyword">int</span> c) &#123;</span><br><span class="line">	ju[r][c + <span class="number">1</span>] = ju[r][c + <span class="number">3</span>] = </span><br><span class="line">	ju[r + <span class="number">2</span>][c + <span class="number">1</span>] = ju[r + <span class="number">2</span>][c + <span class="number">3</span>] = <span class="string">'_'</span>;</span><br><span class="line">	ju[r + <span class="number">1</span>][c] = ju[r + <span class="number">1</span>][c + <span class="number">4</span>] = </span><br><span class="line">	ju[r + <span class="number">2</span>][c] = ju[r + <span class="number">2</span>][c + <span class="number">4</span>] = <span class="string">'|'</span>;</span><br><span class="line">	ju[r + <span class="number">1</span>][c + <span class="number">1</span>] = ju[r + <span class="number">1</span>][c + <span class="number">2</span>] = ju[r + <span class="number">1</span>][c + <span class="number">3</span>] = </span><br><span class="line">	ju[r + <span class="number">2</span>][c + <span class="number">2</span>] = <span class="string">' '</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> dfs(<span class="keyword">int</span> step) &#123;</span><br><span class="line">	<span class="keyword">if</span> (judge()) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">if</span> (step &gt;= <span class="number">6</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">char</span> temp[Ma][Ma];</span><br><span class="line">	<span class="built_in">memcpy</span>(temp, ju, <span class="keyword">sizeof</span> ju);</span><br><span class="line">	rep (i, <span class="number">3</span>) rep (j, <span class="number">3</span>) &#123;</span><br><span class="line">		full(i, j * <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">if</span> (dfs(step + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		<span class="built_in">memcpy</span>(ju, temp, <span class="keyword">sizeof</span> temp);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">signed</span> main() &#123;</span><br><span class="line">	#<span class="keyword">if</span> SYNC==<span class="number">1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    #endif</span><br><span class="line">	<span class="keyword">int</span> ca = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (input()) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d: "</span>, ++ca);</span><br><span class="line">		<span class="keyword">if</span> (dfs(<span class="number">0</span>)) <span class="built_in">puts</span>(<span class="string">"Yes"</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"No"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/details&gt;</span><br><span class="line"></span><br><span class="line">## Egyptian Fractions (HARD version)</span><br><span class="line"></span><br><span class="line">[UVA - <span class="number">12558</span>](https:<span class="comment">//vjudge.net/problem/UVA-12558)</span></span><br><span class="line"></span><br><span class="line">é¢˜æ„ï¼šå…«æ•°ç é—®é¢˜ç§åŠ å…¥äº†ä¸€äº›ä¸èƒ½ç”¨çš„æ•°</span><br><span class="line"></span><br><span class="line">é¢˜è§£ï¼šè¿˜æ˜¯ç»å…¸é—®é¢˜ï¼Œå¥—ä¸Šå…«æ•°ç çš„IDA*ååˆ¤ä¸€ä¸‹ç‰¹æ®Šæ•°æ®å³å¯ï¼Œé¢˜ç›®ä¿è¯äº†æ•°æ®æ˜“äºæ±‚è§£ &lt;del&gt;lrj,tql&lt;/del&gt;</span><br><span class="line"></span><br><span class="line">&lt;details&gt;</span><br><span class="line">&lt;summary&gt;code&lt;/summary&gt;</span><br><span class="line">```cpp</span><br><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-26 20:13:43</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line">#define GOODOJ</span><br><span class="line">#define SYNC <span class="number">0</span></span><br><span class="line"></span><br><span class="line">#ifdef GOODOJ</span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">#include &lt;ext/pb_ds/priority_queue.hpp&gt;</span><br><span class="line">#include &lt;ext/pb_ds/assoc_container.hpp&gt;</span><br><span class="line">#include &lt;ext/pb_ds/tree_policy.hpp&gt;</span><br><span class="line">#include &lt;ext/rope&gt;</span><br><span class="line">#include &lt;chrono&gt;</span><br><span class="line">#include &lt;random&gt;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;cmath&gt;</span><br><span class="line">#include &lt;<span class="built_in">set</span>&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;<span class="built_in">string</span>&gt;</span><br><span class="line">#include &lt;<span class="built_in">map</span>&gt;</span><br><span class="line">#include &lt;<span class="built_in">deque</span>&gt;</span><br><span class="line">#include &lt;<span class="built_in">vector</span>&gt;</span><br><span class="line">#include &lt;limits&gt;</span><br><span class="line">#include &lt;cassert&gt;</span><br><span class="line">#include &lt;sstream&gt;</span><br><span class="line">#include &lt;iterator&gt;</span><br><span class="line">#include &lt;functional&gt;</span><br><span class="line">#endif</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">#define <span class="built_in">endl</span> <span class="string">'\n'</span></span><br><span class="line">#define fep(i,b,e) <span class="keyword">for</span>(<span class="keyword">int</span> i=(b);i&lt;(e);++i)</span><br><span class="line">#define rep(i,x) <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(x);++i)</span><br><span class="line">#define rap(i,x) <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; i : (x))</span><br><span class="line">#define seg(t) (t).begin(), (t).end()</span><br><span class="line">#define ep emplace_back</span><br><span class="line">#define mkp make_pair</span><br><span class="line">#define qxx(i,x) <span class="keyword">for</span>(<span class="keyword">int</span> i = head[x]; ~i; i = node[i].nex)</span><br><span class="line">#define F first</span><br><span class="line">#define S second</span><br><span class="line">#define lowbit(x) ((-(x))&amp;(x))</span><br><span class="line">#define RE <span class="keyword">register</span></span><br><span class="line">#define getchar() getchar_unlocked()</span><br><span class="line">#ifdef DEBUG</span><br><span class="line"><span class="keyword">void</span> err(istream_iterator&lt;<span class="built_in">string</span>&gt;)&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="keyword">void</span> err(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args) &#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line">#define debug(args...) &#123;<span class="built_in">string</span> _s=#args;replace(seg(_s),<span class="string">','</span>,<span class="string">' '</span>);\</span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="built_in">istringstream</span> it(_s);\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">#<span class="keyword">else</span></span><br><span class="line">#define debug(...)</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> cmax(T&amp; a,<span class="keyword">const</span> T&amp; b) &#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> cmin(T&amp; a,<span class="keyword">const</span> T&amp; b) &#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line">#ifdef GOODOJ</span><br><span class="line">mt19937 rng((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count());</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line">#endif</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line">struct point &#123; db x ,y;&#125;;</span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">int</span> sign(db a) &#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line">#define dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span><br><span class="line">#define cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span><br><span class="line">#define crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">1e3</span> + <span class="number">10</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line">cc_hash_table&lt;ll, null_type&gt; se;</span><br><span class="line"><span class="keyword">int</span> maxd; ll ans[Ma], v[Ma];</span><br><span class="line"></span><br><span class="line">ll get_first(ll a, ll b) &#123;</span><br><span class="line">	<span class="keyword">return</span> (b / a) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> better(<span class="keyword">int</span> d) &#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = d; i &gt;= <span class="number">0</span>; i--) <span class="keyword">if</span> (v[i] != ans[i])</span><br><span class="line">		<span class="keyword">return</span> ans[i] == <span class="number">-1</span> <span class="keyword">or</span> v[i] &lt; ans[i];</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> dfs(<span class="keyword">int</span> d, ll from, ll a, ll b) &#123;</span><br><span class="line">	<span class="keyword">if</span> (d == maxd) &#123;</span><br><span class="line">		<span class="keyword">if</span> (b % a <span class="keyword">or</span> se.find(b / a) != se.end()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		v[d] = b / a;</span><br><span class="line">		<span class="keyword">if</span> (better(d)) <span class="built_in">memcpy</span>(ans, v, <span class="keyword">sizeof</span>(ll) * (d + <span class="number">1</span>));</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">bool</span> win = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = max(from, get_first(a, b)); ; ++i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (b * (maxd - d + <span class="number">1</span>) &lt;= i * a) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">if</span> (se.find(i) != se.end()) <span class="keyword">continue</span>;</span><br><span class="line">		v[d] = i;</span><br><span class="line">		ll bb = b * i, aa = a * i - b;</span><br><span class="line">		ll g = __gcd(aa, bb);</span><br><span class="line">		<span class="keyword">if</span> (dfs(d + <span class="number">1</span>, i + <span class="number">1</span>, aa / g, bb / g)) win = <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> win;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">signed</span> main() &#123;</span><br><span class="line">	#<span class="keyword">if</span> SYNC==<span class="number">1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    #endif</span><br><span class="line">	<span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	rep (ca, T) &#123;</span><br><span class="line">		ll a, b; <span class="keyword">int</span> k; <span class="built_in">scanf</span>(<span class="string">"%lld%lld%d"</span>, &amp;a, &amp;b, &amp;k);</span><br><span class="line">		se.clear(); ll t;</span><br><span class="line">		rep (i, k) <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;t), se.insert(t);</span><br><span class="line">		maxd = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (maxd = <span class="number">1</span>; <span class="built_in">memset</span>(ans, <span class="number">-1</span>, <span class="keyword">sizeof</span> ans), !dfs(<span class="number">0</span>, get_first(a, b), a, b);</span><br><span class="line">			   	++maxd);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d: %d/%d="</span>, ca + <span class="number">1</span>, a, b);</span><br><span class="line">		rep (i, maxd + <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">"1/%lld%c"</span>, ans[i], <span class="string">"+\n"</span>[i == maxd]);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="digit-puzzle">Digit Puzzle</h2>
<p><a href="https://vjudge.net/problem/UVA-12107" target="_blank" rel="noopener">UVA - 12107</a></p>
<p>é¢˜æ„ï¼šè®©ä½ æ±‚è§£å­—ç¬¦ï¼Œè¾¾æˆ** X ** = * * * *ï¼Œä¸”åªæœ‰å”¯ä¸€è§£ è¾“å‡ºå­—å…¸åºæœ€å°çš„æ–¹æ¡ˆ</p>
<p>é¢˜è§£ï¼šä¸èƒ½åˆ é™¤æˆ–æ·»åŠ ï¼Œåªèƒ½ä¿®æ”¹ï¼Œç›´æ¥æœå³å¯ï¼Œæ³¨æ„æ— å‰å¯¼0ã€‚ åˆ¤æ–­æœ‰æ— å¤šè§£å†æ¬¡æš´åŠ›ä¸€éå³å¯ï¼Œæšä¸¾ä¹˜æ•°checkç§¯</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-27 09:51:41</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">100</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> maxd;</span><br><span class="line"><span class="keyword">char</span> cs[<span class="number">4</span>][Ma];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> base[] = &#123;<span class="string">'*'</span>, <span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">" %s %s %s\n"</span>, cs[<span class="number">0</span>], cs[<span class="number">1</span>], cs[<span class="number">2</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; cs[<span class="number">0</span>][i]; ++i) a *= <span class="number">10</span>, a += cs[<span class="number">0</span>][i] - <span class="string">'0'</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; cs[<span class="number">1</span>][i]; ++i) b *= <span class="number">10</span>, b += cs[<span class="number">1</span>][i] - <span class="string">'0'</span>;</span><br><span class="line">	a *= b;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = tot - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (cs[<span class="number">2</span>][i] != <span class="string">'*'</span> <span class="keyword">and</span> cs[<span class="number">2</span>][i] - <span class="string">'0'</span> != a % <span class="number">10</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">if</span> (cs[<span class="number">2</span>][i] == <span class="string">'*'</span> <span class="keyword">and</span> !a) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		a /= <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> a == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> k1, <span class="keyword">int</span> k2)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (cs[k1][k2] == <span class="number">0</span>) k1 += <span class="number">1</span>, k2 = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> (k1 == <span class="number">2</span>) <span class="keyword">return</span> judge();</span><br><span class="line">	<span class="keyword">if</span> (cs[k1][k2] != <span class="string">'*'</span>) <span class="keyword">return</span> check(k1, k2 + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">char</span> bac = cs[k1][k2];</span><br><span class="line">	fep (i, <span class="number">1</span>, <span class="number">11</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (i == <span class="number">1</span> <span class="keyword">and</span> k2 == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">		cs[k1][k2] = base[i];</span><br><span class="line">		cnt += check(k1, k2 + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span> (cnt &gt; <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cs[k1][k2] = bac;</span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> d, <span class="keyword">int</span> k1, <span class="keyword">int</span> k2)</span> </span>&#123;</span><br><span class="line">	assert(maxd &lt;= <span class="number">8</span>);</span><br><span class="line">	<span class="keyword">if</span> (d == maxd) &#123;</span><br><span class="line">		<span class="keyword">if</span> (check(<span class="number">0</span>, <span class="number">0</span>) == <span class="number">1</span>) <span class="keyword">return</span> print(), <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (cs[k1][k2] == <span class="number">0</span>) k1 += <span class="number">1</span>, k2 = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> (k1 &gt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">char</span> bac = cs[k1][k2];</span><br><span class="line">	rep (i, <span class="number">11</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (i == <span class="number">1</span> <span class="keyword">and</span> k2 == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">		cs[k1][k2] = base[i];</span><br><span class="line">		<span class="keyword">if</span> (dfs(d + (base[i] != bac), k1, k2 + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cs[k1][k2] = bac;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> qq = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%s%s%s"</span>, cs[<span class="number">0</span>], cs[<span class="number">1</span>], cs[<span class="number">2</span>]) == <span class="number">3</span>) &#123;</span><br><span class="line">		tot = <span class="built_in">strlen</span>(cs[<span class="number">2</span>]);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d:"</span>, ++qq);</span><br><span class="line">		<span class="keyword">for</span> (maxd = <span class="number">0</span>; !dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); ++maxd);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="cubic-eight-puzzle">Cubic Eight-Puzzle</h2>
<p><a href="https://vjudge.net/problem/UVA-1604" target="_blank" rel="noopener">UVA - 1604</a></p>
<p>é¢˜æ„ï¼šç«‹ä½“å…«æ•°ç ï¼Œåªè¦æ±‚ä¿¯è§†å›¾ç›¸åŒï¼Œå¤šä½™ä¸‰åæ­¥è¾“å‡º-1</p>
<p>é¢˜è§£ï¼šåªè¦æ±‚ä¸‰åæ­¥ä»¥å†…ï¼Œå»ºç«‹åˆå§‹èŠ‚ç‚¹ï¼Œå¼€å§‹æ»šå°±è¡Œï¼Œæ³¨æ„ä¸è¦å¾€å›æ»šï¼Œä½¿ç”¨IDA*ï¼Œå½“ä¸åŒæ•°é‡å¤šäºmaxd - å½“å‰æ·±åº¦æ—¶å‰ªæ</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-29 10:33:01</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">100</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">	White,</span><br><span class="line">	Red,</span><br><span class="line">	Blue</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> top, front, left;</span><br><span class="line">	Node (<span class="keyword">int</span> top=White, <span class="keyword">int</span> front=Red, <span class="keyword">int</span> left=Blue) :</span><br><span class="line">	   	top(top), front(front), left(left) &#123;&#125;</span><br><span class="line">	<span class="function">Node <span class="title">gl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Node(left, front, top);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">Node <span class="title">gf</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Node(front, top, left);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> Node eight[<span class="number">4</span>][<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line">eight goal, be;</span><br><span class="line"><span class="keyword">int</span> r, c;</span><br><span class="line"><span class="keyword">int</span> id[Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;c, &amp;r) != <span class="number">2</span> <span class="keyword">or</span> c + r == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	--r, --c;</span><br><span class="line">	rep (i, <span class="number">3</span>) rep (j, <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="keyword">char</span> s[Ma];</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">		goal[i][j] = Node(id[s[<span class="number">0</span>]]);</span><br><span class="line">		be[i][j] = Node();</span><br><span class="line">	&#125;</span><br><span class="line">	be[r][c] = Node(<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	rep (i, <span class="number">3</span>) rep (j, <span class="number">3</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (be[i][j].top != goal[i][j].top) ++cnt;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> xz[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">	  	  yz[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x &gt;= <span class="number">0</span> <span class="keyword">and</span> x &lt; <span class="number">3</span> <span class="keyword">and</span> y &gt;= <span class="number">0</span> <span class="keyword">and</span> y &lt; <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> R, <span class="keyword">int</span> C, <span class="keyword">int</span> fa, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> diff = check();</span><br><span class="line">	<span class="keyword">if</span> (d + diff &gt;= ans) <span class="keyword">return</span> ;</span><br><span class="line">   	<span class="keyword">if</span> (diff == <span class="number">0</span>) <span class="keyword">return</span> cmin(ans, d), <span class="keyword">void</span>();</span><br><span class="line">	rep (i, <span class="number">4</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (i == fa) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">int</span> rr = R + xz[i], cc = C + yz[i];</span><br><span class="line">		<span class="keyword">if</span> (check(rr, cc)) &#123;</span><br><span class="line">			Node bf = be[rr][cc];</span><br><span class="line">			be[rr][cc] = Node(<span class="number">-1</span>);</span><br><span class="line">			be[R][C] = (i &gt; <span class="number">1</span> ? bf.gl() : bf.gf());</span><br><span class="line">			dfs(rr, cc, i ^ <span class="number">1</span>, d + <span class="number">1</span>);</span><br><span class="line">			be[rr][cc] = bf;</span><br><span class="line">			be[R][C] = Node(<span class="number">-1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	id[<span class="string">'W'</span>] = White, id[<span class="string">'R'</span>] = Red, id[<span class="string">'B'</span>] = Blue;</span><br><span class="line">	id[<span class="string">'E'</span>] = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span> (read()) &#123;</span><br><span class="line">		ans = <span class="number">32</span>;</span><br><span class="line">		dfs(r, c, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans == <span class="number">32</span> ? <span class="number">-1</span> : ans);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="guarding-the-chessboard">Guarding the Chessboard</h2>
<p><a href="https://vjudge.net/problem/UVA-11214" target="_blank" rel="noopener">UVA - 11214</a></p>
<p>é¢˜æ„ï¼šç”¨æœ€å°‘çš„çš‡åå æ®æˆ–è¿›æ”»æ‰€æœ‰å¸¦æ ‡è®°ç‚¹</p>
<p>é¢˜è§£ï¼šå…«çš‡åå‡çº§ç‰ˆï¼Œæš´åŠ›æœå³å¯ï¼Œå½“ä¸€ä¸ªç‚¹èƒ½èµ°åˆ°ä¹‹å‰ä¹‹å‰ä¸èƒ½åˆ°çš„åœ°æ–¹å°±å¾—æœ</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-29 14:48:43</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">12</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> re[Ma * <span class="number">2</span>], er[Ma * <span class="number">2</span>], ha[Ma], li[Ma];</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> mz[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> R, C;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;R, &amp;C) != <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	rep (i, R) <span class="built_in">scanf</span>(<span class="string">"%s"</span>, mz[i]);</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> r &gt;= <span class="number">0</span> <span class="keyword">and</span> r &lt; R <span class="keyword">and</span> c &gt;= <span class="number">0</span> <span class="keyword">and</span> c &lt; C <span class="keyword">and</span></span><br><span class="line">		   (!ha[r] <span class="keyword">or</span> !li[c] <span class="keyword">or</span> !re[r + c] <span class="keyword">or</span> !er[r - c + Ma]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	rep (i, R) rep (j, C) <span class="keyword">if</span> (mz[i][j] == <span class="string">'X'</span> <span class="keyword">and</span> !ha[i] <span class="keyword">and</span> !li[j] <span class="keyword">and</span></span><br><span class="line">			!re[i + j] <span class="keyword">and</span> !er[i - j + Ma]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> d, <span class="keyword">const</span> <span class="keyword">int</span>&amp; maxd, <span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (d == maxd) <span class="keyword">return</span> check();</span><br><span class="line">	fep (i, r, R) fep (j, i == r ? c : <span class="number">0</span>, C) <span class="keyword">if</span> (check(i, j)) &#123;</span><br><span class="line">		ha[i] += <span class="number">1</span>, li[j] += <span class="number">1</span>, re[i + j] += <span class="number">1</span>, er[i - j + Ma] += <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span> (dfs(d + <span class="number">1</span>, maxd, i, j + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		ha[i] -= <span class="number">1</span>, li[j] -= <span class="number">1</span>, re[i + j] -= <span class="number">1</span>, er[i - j + Ma] -= <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> opp = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (read()) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d: "</span>, ++opp);</span><br><span class="line">		<span class="keyword">int</span> maxd;</span><br><span class="line">		<span class="keyword">for</span> (maxd = <span class="number">1</span>; <span class="built_in">memset</span>(re, <span class="number">0</span>, <span class="keyword">sizeof</span> re), <span class="built_in">memset</span>(er, <span class="number">0</span>, <span class="keyword">sizeof</span> er),</span><br><span class="line">				<span class="built_in">memset</span>(ha, <span class="number">0</span>, <span class="keyword">sizeof</span> ha), <span class="built_in">memset</span>(li, <span class="number">0</span>, <span class="keyword">sizeof</span> li), </span><br><span class="line">				!dfs(<span class="number">0</span>, maxd, <span class="number">0</span>, <span class="number">0</span>); maxd++);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, maxd);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="planning-mobile-robot-on-tree-easy-version">Planning mobile robot on Tree (EASY Version)</h2>
<p><a href="https://vjudge.net/problem/UVA-12569" target="_blank" rel="noopener">UVA - 12569</a></p>
<p>é¢˜æ„ï¼šæœºå™¨äººè¦å»ç›®æ ‡ç‚¹ï¼Œä½†è·¯ä¸Šæœ‰è®¸å¤šçŸ³å¤´ï¼Œæ¯ä¸€æ­¥å¯ä»¥ç§»åŠ¨çŸ³å¤´ï¼Œä¹Ÿå¯ä»¥ç§»åŠ¨æœºå™¨äººï¼Œé—®ä½ æœ€å°æ­¥æ•°å’Œè·¯å¾„</p>
<p>é¢˜è§£ï¼šå› ä¸ºn&lt;=15, æ‰€ä»¥å¯æš´åŠ›ã€‚æŠŠæ‰€æœ‰çŸ³å¤´å’Œæœºå™¨äººçš„ä½ç½®å‹ç¼©ä¸ºç‚¹å»ºç«‹éšå¼å›¾ï¼Œåœ¨å›¾ä¸Šæœç´¢å³å¯</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-29 16:11:25</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">20</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> state(x) (1&lt;&lt;x)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, s, t;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> tuple&lt;<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span>&gt; node;</span><br><span class="line">node st[(<span class="keyword">int</span>)<span class="number">2e6</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[Ma];</span><br><span class="line"></span><br><span class="line">cc_hash_table&lt;<span class="keyword">int</span>, null_type&gt; look;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	look.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Hash</span><span class="params">(node t)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> (get&lt;<span class="number">0</span>&gt;(t) &lt;&lt; <span class="number">4</span>) | get&lt;<span class="number">1</span>&gt;(t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">try_to_insert</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (look.find(Hash(st[id])) != look.end()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> look.insert(Hash(st[id])), <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> now)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;pa&gt; ans;</span><br><span class="line">	<span class="keyword">while</span> (~get&lt;<span class="number">2</span>&gt;(st[now])) &#123;</span><br><span class="line">		ans.ep(mkp(get&lt;<span class="number">3</span>&gt;(st[now]), get&lt;<span class="number">4</span>&gt;(st[now])));</span><br><span class="line">		now = get&lt;<span class="number">2</span>&gt;(st[now]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (<span class="keyword">int</span>)ans.size());</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> i = ans.rbegin(); i != ans.rend(); ++i)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, i-&gt;F + <span class="number">1</span>, i-&gt;S + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	init();</span><br><span class="line">	<span class="keyword">int</span> front = <span class="number">0</span>, rear = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (front &lt; rear) &#123;</span><br><span class="line">		<span class="keyword">if</span> (get&lt;<span class="number">1</span>&gt;(st[front]) == t) <span class="keyword">return</span> print(front), <span class="literal">true</span>;</span><br><span class="line">		rap (i, g[get&lt;<span class="number">1</span>&gt;(st[front])]) <span class="keyword">if</span> (!(state(i) &amp; get&lt;<span class="number">0</span>&gt;(st[front])) <span class="keyword">and</span></span><br><span class="line">										i != get&lt;<span class="number">1</span>&gt;(st[front])) &#123;</span><br><span class="line">			<span class="comment">//debug(i);</span></span><br><span class="line">			st[rear] = mkt(get&lt;<span class="number">0</span>&gt;(st[front]), i, front, get&lt;<span class="number">1</span>&gt;(st[front]), i);</span><br><span class="line">			<span class="keyword">if</span> (try_to_insert(rear)) ++rear;</span><br><span class="line">		&#125;</span><br><span class="line">		rep (i, n) <span class="keyword">if</span> (state(i) &amp; get&lt;<span class="number">0</span>&gt;(st[front])) &#123;</span><br><span class="line">			rap (j, g[i]) <span class="keyword">if</span> (!(state(j) &amp; get&lt;<span class="number">0</span>&gt;(st[front])) <span class="keyword">and</span></span><br><span class="line">							  j != get&lt;<span class="number">1</span>&gt;(st[front])) &#123;</span><br><span class="line">				<span class="comment">//debug(i, j);</span></span><br><span class="line">				st[rear] = mkt(get&lt;<span class="number">0</span>&gt;(st[front]) ^ state(i) ^ state(j),</span><br><span class="line">							   get&lt;<span class="number">1</span>&gt;(st[front]), front, i, j);</span><br><span class="line">				<span class="keyword">if</span> (try_to_insert(rear)) ++rear;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		++front;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	rep (qq, T) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;n, &amp;m, &amp;s, &amp;t);</span><br><span class="line">		--s, --t;</span><br><span class="line">		st[<span class="number">0</span>] = mkt(<span class="number">0</span>, s, <span class="number">-1</span>, <span class="number">-1</span>, s);</span><br><span class="line">		rep (i, m) &#123;</span><br><span class="line">			<span class="keyword">int</span> pp; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;pp);</span><br><span class="line">			get&lt;<span class="number">0</span>&gt;(st[<span class="number">0</span>]) |= state(--pp);</span><br><span class="line">		&#125;</span><br><span class="line">		rep (i, n) g[i].clear();</span><br><span class="line">		rep (i, n - <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span> u, v; <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u, &amp;v);</span><br><span class="line">			--u, --v;</span><br><span class="line">			g[u].ep(v), g[v].ep(u);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Case %d: "</span>, qq + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span> (!bfs()) <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="moving-pegs">Moving Pegs</h2>
<p><a href="https://vjudge.net/problem/UVA-1533" target="_blank" rel="noopener">UVA - 1533</a></p>
<p>é¢˜æ„ï¼šç»™ä½ ä¸€ä¸ª15ä¸ªæ´çš„è·³æ£‹ç›˜ï¼ŒæŒ‡å®šä¸€ä¸ªç‚¹ä¸ºç©ºï¼Œè®©ä½ å¼€å§‹è·³ï¼Œä½¿å¾—æœ€ç»ˆåªæœ‰åˆå§‹ç‚¹æœ‰çƒï¼Œå…¶ä»–å…¨ä¸ºç©ºï¼Œé—®ä½ æœ€å°‘æ­¥æ•°å’Œæ–¹æ¡ˆ</p>
<p>é¢˜è§£ï¼šä¸€å¼€å§‹ä¸æ˜ç™½è·³æ£‹è§„åˆ™ï¼Œæ­»æ´»å¡åœ¨æ ·ä¾‹ï¼Œè·³æ£‹èƒ½å¾€å‘¨å›´å…­ä¸ªæ–¹å‘è·³ï¼Œä¸”å¿…é¡»éš”ç€è‡³å°‘ä¸€ä¸ªçƒï¼Œè·³å…¥ç©ºæ´ï¼Œä¸”<strong>ä¸èƒ½è·³è¿‡ç©ºæ´</strong></p>
<p>æ˜ç™½è§„åˆ™åå°±å˜ä¸ºåœ¨éšå¼å›¾ä¸Šçš„bfsäº†</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-30 09:18:40</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">1e6</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> state(x) (1&lt;&lt;(x))</span></span><br><span class="line"><span class="keyword">typedef</span> tuple&lt;<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span>&gt; node;</span><br><span class="line">node tp[Ma];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> id[][<span class="number">5</span>] = &#123;</span><br><span class="line">	&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">15</span>&#125;,</span><br><span class="line">	&#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">14</span>&#125;,</span><br><span class="line">	&#123;<span class="number">4</span>, <span class="number">8</span>, <span class="number">13</span>&#125;,</span><br><span class="line">	&#123;<span class="number">7</span>, <span class="number">12</span>&#125;,</span><br><span class="line">	&#123;<span class="number">11</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> len[] = &#123;<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">tuple&lt;int, int&gt; getrc(int aim) &#123;</span><br><span class="line">	assert(aim &gt; <span class="number">0</span> <span class="keyword">and</span> aim &lt; <span class="number">16</span>);</span><br><span class="line">	rep (i, <span class="number">5</span>) rep (j, len[i]) <span class="keyword">if</span> (aim == id[i][j]) <span class="keyword">return</span> &#123;i, j&#125;;</span><br><span class="line">	<span class="keyword">return</span> &#123;<span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> aim)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;pa&gt; ans;</span><br><span class="line">	<span class="keyword">while</span> (~get&lt;<span class="number">1</span>&gt;(tp[aim])) &#123;</span><br><span class="line">		ans.ep(mkp(get&lt;<span class="number">2</span>&gt;(tp[aim]), get&lt;<span class="number">3</span>&gt;(tp[aim])));</span><br><span class="line">		aim = get&lt;<span class="number">1</span>&gt;(tp[aim]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (<span class="keyword">int</span>)ans.size()); <span class="keyword">auto</span> tt = --ans.rend();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> i = ans.rbegin(); i != ans.rend(); ++i) <span class="built_in">printf</span>(<span class="string">"%d %d%c"</span>, i-&gt;F, i-&gt;S, <span class="string">" \n"</span>[i == tt]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> xz[] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">	  	  yz[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">go</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> rr, <span class="keyword">int</span> cc, <span class="keyword">int</span> w, <span class="keyword">int</span> base)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (r != rr <span class="keyword">or</span> c != cc) &#123;</span><br><span class="line">		base |= state(id[r][c] - <span class="number">1</span>);</span><br><span class="line">		r += xz[w], c += yz[w];</span><br><span class="line">	&#125;</span><br><span class="line">	assert(r == rr <span class="keyword">and</span> c == cc);</span><br><span class="line">	base ^= state(id[rr][cc] - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> base;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> r &gt;= <span class="number">0</span> <span class="keyword">and</span> r &lt; <span class="number">5</span> <span class="keyword">and</span> c &gt;= <span class="number">0</span> <span class="keyword">and</span> c &lt; len[r];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">	<span class="keyword">int</span> front = <span class="number">0</span>, rear = <span class="number">1</span>;</span><br><span class="line">	tp[front] = mkt(state(n - <span class="number">1</span>), <span class="number">-1</span>, <span class="number">-1</span>, n);</span><br><span class="line">	vis[state(n - <span class="number">1</span>)] = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">while</span> (front &lt; rear) &#123;</span><br><span class="line">		<span class="keyword">int</span> st = get&lt;<span class="number">0</span>&gt;(tp[front]);</span><br><span class="line">		<span class="keyword">if</span> (__builtin_popcount(st) == <span class="number">14</span> <span class="keyword">and</span> !(st &amp; state(n - <span class="number">1</span>))) <span class="keyword">return</span> print(front), <span class="literal">true</span>;</span><br><span class="line">		<span class="comment">//debug(bitset&lt;15&gt;(st), __builtin_popcount(st), get&lt;3&gt;(tp[front]));</span></span><br><span class="line">		<span class="comment">//debug();</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++) <span class="keyword">if</span> (!(st &amp; state(i))) &#123;</span><br><span class="line">			<span class="keyword">int</span> r, c; tie(r, c) = getrc(i + <span class="number">1</span>);</span><br><span class="line">			rep (j, <span class="number">6</span>) &#123;</span><br><span class="line">				<span class="keyword">int</span> rr = r + xz[j], cc = c + yz[j];</span><br><span class="line">				<span class="keyword">bool</span> first = <span class="literal">false</span>;</span><br><span class="line">				<span class="keyword">while</span> (check(rr, cc)) &#123;</span><br><span class="line">					<span class="keyword">if</span> ((st &amp; state(id[rr][cc] - <span class="number">1</span>))) &#123;</span><br><span class="line">						<span class="keyword">if</span> (!first) <span class="keyword">break</span>;</span><br><span class="line">						<span class="keyword">int</span> temp = go(r, c, rr, cc, j, st);</span><br><span class="line">						<span class="keyword">if</span> (!vis[temp]) &#123;</span><br><span class="line">							vis[temp] = <span class="literal">true</span>;</span><br><span class="line">							tp[rear++] = mkt(temp, front, i + <span class="number">1</span>, id[rr][cc]);</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					&#125; <span class="keyword">else</span> first = <span class="literal">true</span>;</span><br><span class="line">					rr += xz[j], cc += yz[j];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;	</span><br><span class="line">		&#125;</span><br><span class="line">		++front;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	<span class="keyword">while</span> (T--) &#123;</span><br><span class="line">		<span class="keyword">int</span> n; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="keyword">if</span> (!bfs(n)) <span class="built_in">puts</span>(<span class="string">"IMPOSSIBLE"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="according-to-bartjens">According to Bartjens</h2>
<p><a href="https://vjudge.net/problem/UVA-817" target="_blank" rel="noopener">UVA - 817</a></p>
<p>é¢˜æ„ï¼šç»™ä½ ä¸ªæ•°å­—ï¼Œè®©ä½ åœ¨å…¶ä¸­åŠ å…¥+-*ä½¿å¾—ç­”æ¡ˆä¸º2000ï¼ŒæŒ‰å­—å…¸åºè¾“å‡ºæ‰€æœ‰æ–¹æ¡ˆ</p>
<p>é¢˜è§£ï¼šæ³¨æ„æ²¡æœ‰å‰å¯¼é›¶ï¼Œå’Œä¹‹å‰å“ªä¸ªçŒœè°œæ¯”è¾ƒåƒï¼Œæ³¨æ„å¿…é¡»è¦æœ‰ä¸€ä¸ªç¬¦å·ï¼Œæ‰€ä»¥2000=æ˜¯IMPOSSIBLE å…ˆå†™ä¸ªè¡¨è¾¾å¼è§£æå™¨ï¼Œä¸æ–­æ·»åŠ ï¼Œcheckå³å¯</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-30 16:23:55</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">12</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> op[] = &#123;<span class="string">'*'</span>, <span class="string">'+'</span>, <span class="string">'-'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[Ma], cal[Ma * <span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">h</span><span class="params">(<span class="keyword">int</span> aim)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> tot - aim;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">char</span> t)</span> </span>&#123;</span><br><span class="line">	rep (i, <span class="number">3</span>) <span class="keyword">if</span> (t == op[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">parse</span><span class="params">(<span class="keyword">char</span>* a, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> mid = <span class="number">-1</span>, ch = <span class="number">-1</span>;</span><br><span class="line">	<span class="comment">//rep (i, len) putchar(a[i]);</span></span><br><span class="line">	<span class="comment">//putchar('\n');</span></span><br><span class="line">	rep (i, len) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((i <span class="keyword">and</span> a[i] == <span class="string">'-'</span>) <span class="keyword">or</span> a[i] == <span class="string">'+'</span>) &#123;</span><br><span class="line">			mid = i;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (a[i] == <span class="string">'*'</span>) ch = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (mid != <span class="number">-1</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (a[mid] == <span class="string">'+'</span>) <span class="keyword">return</span> parse(a, mid) + parse(a + mid + <span class="number">1</span>, len - mid - <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> parse(a, mid) + parse(a + mid, len - mid);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (ch != <span class="number">-1</span>) <span class="keyword">return</span> parse(a, ch) * parse(a + ch + <span class="number">1</span>, len - ch - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>, aim = <span class="number">1</span>; <span class="keyword">if</span> (a[<span class="number">0</span>] == <span class="string">'-'</span>) aim = <span class="number">-1</span>, ++a;</span><br><span class="line">	rep (i, len - (aim == <span class="number">-1</span>)) ans *= <span class="number">10</span>, ans += a[i] - <span class="string">'0'</span>;</span><br><span class="line">	<span class="comment">//debug(ans*aim, ans);</span></span><br><span class="line">	<span class="keyword">return</span> ans * aim;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> parse(cal, <span class="built_in">strlen</span>(cal)) == <span class="number">2000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> clen;</span><br><span class="line"><span class="keyword">bool</span> can;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span>&amp; maxd, <span class="keyword">int</span> d, <span class="keyword">int</span> from)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> pre = clen;</span><br><span class="line">	<span class="keyword">if</span> (d &gt; <span class="number">8</span> <span class="keyword">or</span> from &gt;= tot) <span class="keyword">return</span> ;</span><br><span class="line">	<span class="keyword">auto</span> chec = [&amp;]() &#123;</span><br><span class="line">		<span class="keyword">if</span> (from &gt;= tot <span class="keyword">or</span> (s[from] == <span class="string">'0'</span> <span class="keyword">and</span> from != tot - <span class="number">1</span>)) <span class="keyword">return</span> ;</span><br><span class="line">		fep (i, from, tot) cal[clen++] = s[i];</span><br><span class="line">		cal[clen] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span> (check()) can = <span class="literal">true</span>, <span class="built_in">printf</span>(<span class="string">"  %s=\n"</span>, cal);</span><br><span class="line">		clen = pre;</span><br><span class="line">		<span class="keyword">return</span> ;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">if</span>(d)chec();</span><br><span class="line">	fep (i, from, tot) &#123;</span><br><span class="line">		fep (j, from, i + <span class="number">1</span>) cal[clen++] = s[j];</span><br><span class="line">		rep (j, <span class="number">3</span>) &#123;</span><br><span class="line">			cal[clen++] = op[j];</span><br><span class="line">			dfs(maxd, d + <span class="number">1</span>, i + <span class="number">1</span>);</span><br><span class="line">			--clen;</span><br><span class="line">		&#125;</span><br><span class="line">		clen = pre;</span><br><span class="line">		<span class="keyword">if</span> (s[from] == <span class="string">'0'</span>) <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> qq = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//char tpp[100] = "2-6-8-3*692+64";</span></span><br><span class="line">	<span class="comment">//cout &lt;&lt; parse(tpp, strlen(tpp)) &lt;&lt; endl;</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%s"</span>, s) == <span class="number">1</span> <span class="keyword">and</span> s[<span class="number">0</span>] != <span class="string">'='</span>) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Problem %d\n"</span>, ++qq);</span><br><span class="line">		tot = <span class="built_in">strlen</span>(s) - <span class="number">1</span>;</span><br><span class="line">		can = <span class="literal">false</span>;</span><br><span class="line">		clen = <span class="number">0</span>;</span><br><span class="line">		dfs(<span class="number">8</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="keyword">if</span> (!can) <span class="built_in">puts</span>(<span class="string">"  IMPOSSIBLE"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="sticks">Sticks</h2>
<p><a href="https://vjudge.net/problem/UVA-307" target="_blank" rel="noopener">UVA - 307</a></p>
<p>é¢˜æ„ï¼šç»™ä½ ä¸€å †ç è¿‡åçš„å°æœ¨æ£ï¼Œé—®ä½ æœ€å°å¯èƒ½çš„åŸå§‹é•¿åº¦ï¼Œä½¿æ¯æ ¹å°æœ¨æ£é•¿åº¦ç›¸åŒ</p>
<p>é¢˜è§£ï¼šå…ˆå°†å°æœ¨æ£æ’åºï¼Œæšä¸¾åŸå§‹é•¿åº¦ï¼Œæ¯æ ¹æœ¨æ£ä»å°åˆ°å¤§æœï¼Œä»æœ€å¤§å‘å‰å‡‘é½åŸå§‹æœ¨æ£ï¼Œå½“æŸæ ¹æœ¨æ£æ— æ³•ç»„æˆåŸå§‹æœ¨æ£æ—¶å°±å¯å‰ªå»ï¼Œå› ä¸ºä¹‹åçš„æœ¨æ£æŒ‡æŒ¥æ¯”å½“å‰å¤§ï¼Œä¸å¯èƒ½ç»„æˆï¼Œå•è°ƒæ€§å‰ªæ</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-04-30 18:16:03</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">110</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[Ma], n;</span><br><span class="line"><span class="keyword">bool</span> vis[Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> aim, <span class="keyword">int</span> pre, <span class="keyword">int</span> f, <span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (cur == n) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = f; i &gt;= <span class="number">0</span>; i--) <span class="keyword">if</span> (!vis[i]) &#123;</span><br><span class="line">		<span class="keyword">if</span> (pre + a[i] &lt; aim) &#123;</span><br><span class="line">			vis[i] = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span> (dfs(aim, pre + a[i], i - <span class="number">1</span>, cur + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			vis[i] = <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">while</span> (i &gt; <span class="number">0</span> <span class="keyword">and</span> a[i] == a[i - <span class="number">1</span>]) --i;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pre + a[i] == aim) &#123;</span><br><span class="line">			vis[i] = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span> (dfs(aim, <span class="number">0</span>, n - <span class="number">1</span>, cur + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">return</span> vis[i] = <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (pre == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span> <span class="keyword">and</span> n) &#123;</span><br><span class="line">		<span class="keyword">int</span> all = <span class="number">0</span>; <span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">		rep (i, n) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, a + i), all += a[i];</span><br><span class="line">		sort(a, a + n);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">			<span class="keyword">if</span> (all % i == <span class="number">0</span> <span class="keyword">and</span> a[n - <span class="number">1</span>] &lt;= all / i <span class="keyword">and</span> dfs(all / i, <span class="number">0</span>, n - <span class="number">1</span>, <span class="number">0</span>)) &#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, all / i);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="biggest-number">Biggest Number</h2>
<p><a href="https://vjudge.net/problem/UVA-11882" target="_blank" rel="noopener">UVA - 11882</a></p>
<p>é¢˜æ„ï¼šç»™ä½ ä¸€ä¸ªçŸ©é˜µï¼Œæœ‰éšœç¢ç‰©å’Œæ•°å­—æ ¼ï¼Œä»ä¸€ä¸ªæ•°å­—æ ¼èµ°åˆ°å…¶ä»–æ•°å­—æ ¼çš„è·¯å¾„å½¢æˆä¸€ä¸ªæ•°å­—ï¼Œé—®ä½ èƒ½å¾—åˆ°çš„æœ€å¤§æ•´æ•°</p>
<p>é¢˜è§£ï¼šä»¥æ¯ä¸ªæ•°å­—ä¸ºå¼€å¤´è¿›è¡Œæœç´¢ï¼Œå½“å½“å‰æ‰€æœ‰å¯èƒ½èƒ½åˆ°è¾¾çš„æ•°å­—æ ¼çš„æœ€å¤§å€¼å°äºç­”æ¡ˆæ—¶è¿›è¡Œæœ€ä¼˜æ€§å‰ªæ</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-05-01 09:23:10</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">32</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> R, C;</span><br><span class="line"><span class="keyword">char</span> mz[Ma][Ma];</span><br><span class="line"><span class="keyword">char</span> ans[Ma], tpp[Ma];</span><br><span class="line"><span class="keyword">int</span> la, lt;</span><br><span class="line"><span class="keyword">bool</span> vis[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">char</span>* gz, <span class="keyword">char</span>* so)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">strlen</span>(so) &gt; <span class="built_in">strlen</span>(gz)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">strlen</span>(so) == <span class="built_in">strlen</span>(gz) <span class="keyword">and</span> <span class="built_in">strcmp</span>(gz, so) &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; tep;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> xd[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">	  	  yd[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> r &gt;= <span class="number">0</span> <span class="keyword">and</span> r &lt; R <span class="keyword">and</span> c &gt;= <span class="number">0</span> <span class="keyword">and</span> c &lt; C <span class="keyword">and</span> !vis[r][c] <span class="keyword">and</span> mz[r][c] != <span class="string">'#'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vvs[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(vvs, <span class="number">0</span>, <span class="keyword">sizeof</span> vvs);</span><br><span class="line">	<span class="built_in">queue</span>&lt;pa&gt; q; q.emplace(mkp(r, c));</span><br><span class="line">	vvs[r][c] = <span class="literal">true</span>; tep.clear();</span><br><span class="line">	<span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">		pa t = q.front(); q.pop();</span><br><span class="line">		rep (i, <span class="number">4</span>) &#123;</span><br><span class="line">			<span class="keyword">int</span> rr = t.F + xd[i], cc = t.S + yd[i];</span><br><span class="line">			<span class="keyword">if</span> (check(rr, cc) <span class="keyword">and</span> !vvs[rr][cc]) &#123;</span><br><span class="line">				vvs[rr][cc] = <span class="literal">true</span>;</span><br><span class="line">				tep.ep(mz[rr][cc]);</span><br><span class="line">				q.emplace(mkp(rr, cc));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (check(ans, tpp)) la = lt, <span class="built_in">memcpy</span>(ans, tpp, <span class="keyword">sizeof</span> tpp);</span><br><span class="line">	<span class="comment">//debug("totpre", tpp, lt);</span></span><br><span class="line">	&#123;</span><br><span class="line">		bfs(r, c);</span><br><span class="line">		<span class="keyword">if</span> (tep.size() + lt &lt; la) <span class="keyword">return</span> ;</span><br><span class="line">		sort(seg(tep));</span><br><span class="line">		<span class="keyword">int</span> res = tep.size();</span><br><span class="line">		rep (i, res) &#123;</span><br><span class="line">			tpp[lt++] = tep.back();</span><br><span class="line">			tep.pop_back();</span><br><span class="line">		&#125;</span><br><span class="line">		tpp[lt] = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span> (check(tpp, ans)) <span class="keyword">return</span> tpp[lt - res] = <span class="number">0</span>, lt -= res, <span class="keyword">void</span>();</span><br><span class="line">		tpp[lt - res] = <span class="number">0</span>;</span><br><span class="line">		lt -= res;</span><br><span class="line">	&#125;</span><br><span class="line">	rep (i, <span class="number">4</span>) &#123;</span><br><span class="line">		<span class="keyword">int</span> rr = r + xd[i], cc = c + yd[i];</span><br><span class="line">		<span class="keyword">if</span> (check(rr, cc)) &#123;</span><br><span class="line">			vis[rr][cc] = <span class="literal">true</span>;</span><br><span class="line">			tpp[lt++] = mz[rr][cc];</span><br><span class="line">			tpp[lt] = <span class="number">0</span>;</span><br><span class="line">			<span class="comment">//debug(tpp, lt);</span></span><br><span class="line">			dfs(rr, cc);</span><br><span class="line">			tpp[--lt] = <span class="number">0</span>;</span><br><span class="line">			vis[rr][cc] = <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;R, &amp;C) == <span class="number">2</span> <span class="keyword">and</span> R + C) &#123;</span><br><span class="line">		rep (i, R) <span class="built_in">scanf</span>(<span class="string">"%s"</span>, mz[i]);</span><br><span class="line">		la = <span class="number">0</span>; <span class="built_in">memset</span>(ans, <span class="number">0</span>, <span class="keyword">sizeof</span> ans);</span><br><span class="line">		<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">		rep (i, R) rep (j, C) <span class="keyword">if</span> (mz[i][j] != <span class="string">'#'</span>) &#123;</span><br><span class="line">			vis[i][j] = <span class="literal">true</span>;</span><br><span class="line">			lt = <span class="number">1</span>;</span><br><span class="line">			<span class="built_in">memset</span>(tpp, <span class="number">0</span>, <span class="keyword">sizeof</span> tpp);</span><br><span class="line">			tpp[<span class="number">0</span>] = mz[i][j];</span><br><span class="line">			dfs(i, j);</span><br><span class="line">			vis[i][j] = <span class="literal">false</span>;</span><br><span class="line">			debug(ans);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, ans);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="finding-seats-again">Finding Seats Again</h2>
<p><a href="https://vjudge.net/problem/UVA-11846" target="_blank" rel="noopener">UVA - 11846</a></p>
<p>é¢˜æ„ï¼šæ¯ä¸ªå°ç»„æœ‰ä¸€ä¸ªçŸ©å½¢åº§ä½ï¼Œç»™å‡ºä¸€ä¸ªçŸ©é˜µï¼Œå…¶ä¸­æ•°å­—æ˜¯å°ç»„äººæ•°ï¼Œè®©ä½ ç»™å‡ºå¯èƒ½åº§ä½æ–¹æ¡ˆ</p>
<p>é¢˜è§£ï¼šæœç´¢å¯¹è±¡çš„é€‰å–ï¼Œç¬¬ä¸€æ¬¡æˆ‘é€‰æ‹©äº†æ¯ä¸ªæ•°å­—æ ¼ï¼Œä»¥æ¯ä¸ªæ•°å­—æ ¼çš„å¯èƒ½ä½ç½®çŸ©é˜µè¿›è¡Œæœç´¢ä½†Täº†ï¼Œåˆ†æäº†ä¹‹åå‘ç°å¤æ‚åº¦æ˜¯å¤§æ¦‚æ˜¯<span class="math inline">\(O(9^{2*n^2})\)</span>ï¼Œ è½¬æ¢æœç´¢å¯¹è±¡ä¸ºæ¯ä¸ªçŸ©é˜µåï¼Œå¤æ‚åº¦åªæœ‰<span class="math inline">\(O(n^4)\)</span>å·¦å³</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-05-01 20:25:27</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">23</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> mz[Ma][Ma];</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="keyword">int</span> bj[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	rep (i, n) &#123;</span><br><span class="line">		rep (j, n) <span class="built_in">putchar</span>(<span class="string">'A'</span> + bj[i][j] - <span class="number">1</span>);</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> rr, <span class="keyword">int</span> cc)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	fep (i, r, rr + <span class="number">1</span>) fep (j, c, cc + <span class="number">1</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (bj[i][j]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">if</span> (mz[i][j] == <span class="string">'.'</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> (cnt) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		cnt = mz[i][j] - <span class="string">'0'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> cnt == (rr - r + <span class="number">1</span>) * (cc - c + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">full</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> rr, <span class="keyword">int</span> cc, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">	fep (i, r, rr + <span class="number">1</span>) fep (j, c, cc + <span class="number">1</span>) bj[i][j] = val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (id == k) <span class="keyword">return</span> print(), <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">int</span> r = pos / n, c = pos % n;</span><br><span class="line">	<span class="keyword">if</span> (bj[r][c]) <span class="keyword">return</span> dfs(id, pos + <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> mx = n;</span><br><span class="line">	fep (i, r, n) fep (j, c, mx) &#123;</span><br><span class="line">		<span class="keyword">if</span> ((i - r + <span class="number">1</span>) * (j - c + <span class="number">1</span>) &gt; <span class="number">9</span>) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">if</span> (bj[i][j]) &#123;mx = j; <span class="keyword">break</span>;&#125;</span><br><span class="line">		<span class="keyword">if</span> (check(r, c, i, j)) &#123;</span><br><span class="line">			full(r, c, i, j, id + <span class="number">1</span>);</span><br><span class="line">			<span class="keyword">if</span> (dfs(id + <span class="number">1</span>, pos + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			full(r, c, i, j, <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k) == <span class="number">2</span> <span class="keyword">and</span> n + k) &#123;</span><br><span class="line">		rep (i, n) <span class="built_in">scanf</span>(<span class="string">"%s"</span>, mz[i]);</span><br><span class="line">		<span class="built_in">memset</span>(bj, <span class="number">0</span>, <span class="keyword">sizeof</span> bj);</span><br><span class="line">		assert(dfs(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="gokigen-naname">Gokigen Naname</h2>
<p><a href="https://vjudge.net/problem/UVA-11694" target="_blank" rel="noopener">UVA - 11694</a></p>
<p>é¢˜æ„ï¼šç»™å‡ºä¸€å¼ ç½‘æ ¼ï¼Œäº¤å‰ç‚¹ä¸Šæœ‰æ•°å­—ï¼Œè®©ä½ ä¸ºæ¯ä¸ªæ ¼å­ç”»æ–œçº¿ï¼Œä½¿å¾—æ¯ä¸ªäº¤å‰ç‚¹çš„æ•°å­—ç­‰äºå’Œä»–ç›¸è¿çš„æ–œçº¿æ¡æ•°ï¼Œä¸”ä¸æˆç¯</p>
<p>é¢˜è§£ï¼šæš´åŠ›æœç´¢ï¼Œç›´æ¥åˆ¤æ–­ï¼Œç”¨å¹¶æŸ¥é›†åˆ¤ç¯</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-05-02 16:02:06</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar getchar_unlocked</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">15</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> mz[Ma][Ma];</span><br><span class="line"><span class="keyword">int</span> n, fa[Ma * Ma], ans[Ma][Ma], val[Ma][Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> fa[x] = fa[x] == x ? x : find(fa[x]);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;rep (i, n + <span class="number">2</span>) rep (j, n + <span class="number">2</span>) fa[i * Ma + j] = i * Ma + j; <span class="built_in">memset</span>(val, <span class="number">0</span>, <span class="keyword">sizeof</span> val);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	rep (i, n) &#123;</span><br><span class="line">		rep (j, n) <span class="built_in">putchar</span>(ans[i][j] ? <span class="string">'/'</span> : <span class="string">'\\'</span>);</span><br><span class="line">		<span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> r = cur / n, c = cur % n;</span><br><span class="line">	<span class="keyword">if</span> (mz[r][c] != <span class="string">'.'</span> <span class="keyword">and</span> val[r][c] != mz[r][c] - <span class="string">'0'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (r == n - <span class="number">1</span>) <span class="keyword">if</span> (mz[n][c] != <span class="string">'.'</span> <span class="keyword">and</span> val[n][c] != mz[n][c] - <span class="string">'0'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (c == n - <span class="number">1</span>) <span class="keyword">if</span> (mz[r][n] != <span class="string">'.'</span> <span class="keyword">and</span> val[r][n] != mz[r][n] - <span class="string">'0'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (r == n - <span class="number">1</span> <span class="keyword">and</span> c == n - <span class="number">1</span>) <span class="keyword">if</span> (mz[n][n] != <span class="string">'.'</span> <span class="keyword">and</span> val[n][n] != mz[n][n] - <span class="string">'0'</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (cur == n * n) <span class="keyword">return</span> print(), <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">int</span> r = cur / n, c = cur % n;</span><br><span class="line">	rep (k, <span class="number">2</span>) &#123;</span><br><span class="line">		pa a = k ? mkp(r, c + <span class="number">1</span>) : mkp(r, c), b = k ? mkp(r + <span class="number">1</span>, c) : mkp(r + <span class="number">1</span>, c + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">int</span> p1 = find(a.F * Ma + a.S), p2 = find(b.F * Ma + b.S);</span><br><span class="line">		<span class="keyword">if</span> (p1 != p2) &#123;</span><br><span class="line">			<span class="keyword">int</span> ff[Ma * Ma];</span><br><span class="line">			<span class="built_in">memcpy</span>(ff, fa, <span class="keyword">sizeof</span> fa);</span><br><span class="line">			fa[p2] = p1;</span><br><span class="line">			ans[r][c] = k;</span><br><span class="line">			++val[a.F][a.S], ++val[b.F][b.S];</span><br><span class="line">			<span class="keyword">if</span> (check(cur) <span class="keyword">and</span> dfs(cur + <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			<span class="built_in">memcpy</span>(fa, ff, <span class="keyword">sizeof</span> ff);</span><br><span class="line">			--val[a.F][a.S], --val[b.F][b.S];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> T; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">	<span class="keyword">while</span> (T--) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">		init();</span><br><span class="line">		rep (i, n + <span class="number">1</span>) <span class="built_in">scanf</span>(<span class="string">"%s"</span>, mz[i]);</span><br><span class="line">		assert(dfs(<span class="number">0</span>));</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<h2 id="the-wall-pushers">The Wall Pushers</h2>
<p><a href="https://vjudge.net/problem/UVA-10384" target="_blank" rel="noopener">UVA - 10384</a></p>
<p>é¢˜æ„ï¼šç»™ä½ ä¸€ä¸ª4*6çš„å¸¦å¢™çŸ©é˜µï¼Œä½ è¦ä»åˆå§‹æ ¼å­ç§»åŠ¨å‡ºçŸ©é˜µï¼Œ å¯ä»¥æ¨åŠ¨ä¸€å±‚å¢™</p>
<p>é¢˜è§£ï¼šä¸€å¼€å§‹æˆ‘å¾ˆsbçš„ç”¨ç»™å‡ºä¿¡æ¯åå‘å»ºç«‹åŸå›¾ï¼Œåœ¨åŸå›¾ä¸Šä¹±æï¼Œwaäº†ä¸¤æ¬¡åæ„Ÿè§‰ååˆ†ä¸å¯¹åŠ²ï¼Œ æœ€åç›´æ¥ç”¨åŸä¿¡æ¯ï¼Œä½¿ç”¨äºŒè¿›åˆ¶ä½œä¸ºæ¯ä¸ªæ ¼å­å‘¨å›´çš„å¢™ï¼Œè¿›è¡Œcheckå³å¯ï¼Œä½¿ç”¨IDA*ï¼Œå½“æœ€è¿‘çš„å‡ºå£çš„è·ç¦»+då¤§äºmaxdçš„æ—¶å€™å‰ªæ</p>
<p>æ³¨æ„æ¨å¢™çš„æ—¶å€™ä¼šå½±å“å½“å‰æ ¼å­ï¼Œæ¨æ–¹å‘æ ¼å­ï¼Œå’Œæ¨æ–¹å‘æ ¼å­å†å‰ä¸€æ ¼çš„æ ¼å­ï¼Œ è¿˜æœ‰æ¨ä¸åŠ¨è¾¹ç•Œå¢™</p>
<details>
<summary>code</summary> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*************************************************************************</span></span><br><span class="line"><span class="comment">    &gt; File Name: solve.cpp</span></span><br><span class="line"><span class="comment">    &gt; Author: liupo</span></span><br><span class="line"><span class="comment">    &gt; Mail: lanzongwei@gmail.com</span></span><br><span class="line"><span class="comment">    &gt; Created Time: 2020-05-02 22:37:30</span></span><br><span class="line"><span class="comment"> ************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SYNC 0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> endl <span class="meta-string">'\n'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fep(i,b,e) for(int i=(b);i&lt;(e);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,x) for(int i=0;i&lt;(x);++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rap(i,x) for(auto&amp; i : (x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> seg(t) (t).begin(), (t).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ep emplace_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mkt make_tuple</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> qxx(i,x) for(int i = head[x]; ~i; i = node[i].nex)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) ((-(x))&amp;(x))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RE register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> getchar() getchar_unlocked()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt;)</span></span>&#123;&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">err</span><span class="params">(istream_iterator&lt;<span class="built_in">string</span>&gt; it, T a, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cerr</span> &lt;&lt; *it &lt;&lt; <span class="string">" = "</span> &lt;&lt; a &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    err(++it, args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(args...) &#123;string _s=#args;replace(seg(_s),<span class="meta-string">','</span>,<span class="meta-string">' '</span>);\</span></span><br><span class="line"><span class="built_in">cerr</span>&lt;&lt;<span class="string">"DEBUG:"</span>;<span class="function"><span class="built_in">istringstream</span> <span class="title">it</span><span class="params">(_s)</span></span>;\</span><br><span class="line">err(istream_iterator&lt;<span class="built_in">string</span>&gt;(it), args);<span class="built_in">cerr</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(...)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmax</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&lt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmin</span><span class="params">(T&amp; a,<span class="keyword">const</span> T&amp; b)</span> </span>&#123;<span class="keyword">return</span> a&gt;b?a=b,<span class="number">1</span>:<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> GOODOJ</span></span><br><span class="line"><span class="function">mt19937 <span class="title">rng</span><span class="params">((<span class="keyword">uint32_t</span>)chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">typedef</span> __gnu_pbds::priority_queue&lt;<span class="keyword">int</span>&gt; pq;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span> str;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pa;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> P = <span class="built_in">acos</span>(<span class="number">-1.0</span>), eps = <span class="number">1e-9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> db x ,y;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">sign</span><span class="params">(db a)</span> </span>&#123;<span class="keyword">return</span> a &lt; -eps ? <span class="number">-1</span> : a &gt; eps;&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dot(p1,p2,p3) ((p2.x-p1.x)*(p3.x-p1.x)+(p2.y-p1.y)*(p3.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cross(p1,p2,p3) ((p2.x-p1.x)*(p3.y-p1.y)-(p3.x-p1.x)*(p2.y-p1.y))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> crossOp(p1,p2,p3) sign(cross(p1,p2,p3))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> state(x) (1&lt;&lt;(x))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Ma = <span class="number">12</span>, inf = <span class="number">0x3f3f3f3f</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> mz[Ma][Ma]; <span class="keyword">bool</span> vis[Ma][Ma];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">win</span> <span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> r == <span class="number">0</span> <span class="keyword">or</span> r == <span class="number">5</span> <span class="keyword">or</span> c == <span class="number">0</span> <span class="keyword">or</span> c == <span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span> <span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">bool</span> cp=<span class="literal">false</span>)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (cp) <span class="keyword">return</span> r &gt;= <span class="number">0</span> <span class="keyword">and</span> r &lt;= <span class="number">5</span> <span class="keyword">and</span> c &gt;= <span class="number">0</span> <span class="keyword">and</span> c &lt;= <span class="number">7</span>;</span><br><span class="line">	<span class="keyword">return</span> r &gt; <span class="number">0</span> <span class="keyword">and</span> r &lt; <span class="number">5</span> <span class="keyword">and</span> c &gt; <span class="number">0</span> <span class="keyword">and</span> c &lt; <span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">	  	  dy[] = &#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> ai[] = &#123;<span class="string">'W'</span>, <span class="string">'N'</span>, <span class="string">'E'</span>, <span class="string">'S'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">behind</span> <span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> dir)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!(mz[r][c] &amp; state(dir))) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span> ((dir == <span class="number">0</span> <span class="keyword">and</span> c == <span class="number">1</span>) <span class="keyword">or</span> (dir == <span class="number">1</span> <span class="keyword">and</span> r == <span class="number">1</span>) <span class="keyword">or</span> (dir == <span class="number">2</span> <span class="keyword">and</span> c == <span class="number">6</span>) <span class="keyword">or</span> (dir == <span class="number">3</span> <span class="keyword">and</span> r == <span class="number">4</span>)) <span class="keyword">return</span> <span class="number">-2</span>;</span><br><span class="line">	<span class="keyword">if</span> (mz[r + dx[dir]][c + dy[dir]] &amp; state(dir)) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">h</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans = inf;</span><br><span class="line">	fep (i, <span class="number">1</span>, <span class="number">7</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (mz[<span class="number">1</span>][i] &amp; state(<span class="number">1</span>)) cmin(ans, <span class="built_in">abs</span>(r - <span class="number">1</span>) + <span class="built_in">abs</span>(c - i));</span><br><span class="line">		<span class="keyword">if</span> (mz[<span class="number">4</span>][i] &amp; state(<span class="number">3</span>)) cmin(ans, <span class="built_in">abs</span>(<span class="number">4</span> - r) + <span class="built_in">abs</span>(c - i));</span><br><span class="line">	&#125;</span><br><span class="line">	fep (i, <span class="number">1</span>, <span class="number">5</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (mz[i][<span class="number">1</span>] &amp; state(<span class="number">0</span>)) cmin(ans, <span class="built_in">abs</span>(r - i) + <span class="built_in">abs</span>(c - <span class="number">1</span>));</span><br><span class="line">		<span class="keyword">if</span> (mz[i][<span class="number">6</span>] &amp; state(<span class="number">2</span>)) cmin(ans, <span class="built_in">abs</span>(r - i) + <span class="built_in">abs</span>(<span class="number">6</span> - c));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> res[Ma * Ma];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line">	res[cur] = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> dir)</span> </span>&#123;</span><br><span class="line">	mz[r][c] ^= state(dir);</span><br><span class="line">	r += dx[dir], c += dy[dir];</span><br><span class="line">	mz[r][c] ^= state(dir ^ state(<span class="number">1</span>));</span><br><span class="line">	mz[r][c] ^= state(dir);</span><br><span class="line">	r += dx[dir], c += dy[dir];</span><br><span class="line">	<span class="keyword">if</span>(check(r, c)) mz[r][c] ^= state(dir ^ state(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span> <span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> d, <span class="keyword">const</span> <span class="keyword">int</span>&amp; maxd)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (d == maxd) &#123;</span><br><span class="line">		<span class="keyword">if</span> (win(r, c)) <span class="keyword">return</span> print(d), <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//debug(r, c, d, maxd, bitset&lt;4&gt;(mz[r][c]));</span></span><br><span class="line">	<span class="keyword">if</span> (d + h(r, c) &gt; maxd) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	rep (i, <span class="number">4</span>) &#123;</span><br><span class="line">		<span class="keyword">int</span> rr = r + dx[i], cc = c + dy[i];</span><br><span class="line">		<span class="keyword">if</span> (check(rr, cc, <span class="literal">true</span>) <span class="keyword">and</span> !vis[rr][cc]) &#123;</span><br><span class="line">			<span class="keyword">int</span> aim = behind(r, c, i);</span><br><span class="line">			<span class="keyword">if</span> (aim &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">			vis[rr][cc] = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">int</span> pre[Ma][Ma];</span><br><span class="line">			<span class="built_in">memcpy</span>(pre, mz, <span class="keyword">sizeof</span> mz);</span><br><span class="line">			<span class="keyword">if</span> (aim == <span class="number">1</span>) push(r, c, i);</span><br><span class="line">			res[d] = ai[i];</span><br><span class="line">			<span class="keyword">if</span> (dfs(rr, cc, d + <span class="number">1</span>, maxd)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">			vis[rr][cc] = <span class="literal">false</span>;</span><br><span class="line">			<span class="built_in">memcpy</span>(mz, pre, <span class="keyword">sizeof</span> pre);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">if</span> SYNC==1</span></span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> x, y;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y) == <span class="number">2</span> <span class="keyword">and</span> x + y) &#123;</span><br><span class="line">		fep (i, <span class="number">1</span>, <span class="number">5</span>) fep (j, <span class="number">1</span>, <span class="number">7</span>) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;mz[i][j]);</span><br><span class="line">		<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span> vis);</span><br><span class="line">		vis[y][x] = <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> maxd = <span class="number">0</span>; !dfs(y, x, <span class="number">0</span>, maxd); ++maxd);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<p>å‘ç€ç¬¬ä¹ç« è¿›å‘ï¼ï¼GOGOGOğŸ±â€ğŸ‘¤</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>	  
	</div>

	<div>
  	<center>
	<div class="pagination">

    
    
    <a href="/2020/05/05/ç‰›å®¢-åƒé±¼é¢˜è§£/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2020/05/03/ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ç¬¬ä¸ƒç« ä¾‹é¢˜-15-15/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2020-05-03 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/problem-solve/">é¢˜è§£<span>19</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/code/">code<span>22</span></a></li> <li><a href="/tags/algrm/">ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸<span>10</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
		   <span class="toc-title">Contents</span>
			<ol class="toc-article"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#firetruck"><span class="toc-article-text">Firetruck</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#golygons"><span class="toc-article-text">Golygons</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#the-domino-effect"><span class="toc-article-text">The Domino Effect</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#cutting-chains"><span class="toc-article-text">Cutting Chains</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#pipeline-scheduling"><span class="toc-article-text">Pipeline Scheduling</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#digit-puzzle"><span class="toc-article-text">Digit Puzzle</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#cubic-eight-puzzle"><span class="toc-article-text">Cubic Eight-Puzzle</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#guarding-the-chessboard"><span class="toc-article-text">Guarding the Chessboard</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#planning-mobile-robot-on-tree-easy-version"><span class="toc-article-text">Planning mobile robot on Tree (EASY Version)</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#moving-pegs"><span class="toc-article-text">Moving Pegs</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#according-to-bartjens"><span class="toc-article-text">According to Bartjens</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#sticks"><span class="toc-article-text">Sticks</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#biggest-number"><span class="toc-article-text">Biggest Number</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#finding-seats-again"><span class="toc-article-text">Finding Seats Again</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#gokigen-naname"><span class="toc-article-text">Gokigen Naname</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#the-wall-pushers"><span class="toc-article-text">The Wall Pushers</span></a></li></ol>
		</div>
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->




	<div id="comment"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#comment' ,
        notify:true, 
        verify:true, 
        appId: 'mpYG5gk3zUSGLHSmW2YgT3oA-gzGzoHsz',
        appKey: 'vV040gPRCKgVKVH5niloUksW',
        placeholder: 'è¯„è®ºä¸€ä¸‹å†èµ°å˜›o(*ï¿£â–½ï¿£*)ãƒ–',
        path:window.location.pathname, 
        avatar:'mm',
        visitor:true
    });
    document.body.addEventListener('click', function(e) {
        if (e.target.classList.contains('vsubmit')) {
            const email = document.querySelector('input[type=email]');
            const nick = document.querySelector('input[name=nick]');
            if (!email.value || !nick.value) {
                const str = `<div class="valert txt-center"><div class="vtext">è¯·å¡«å†™æ˜µç§°å’Œé‚®ç®±ï¼</div></div>`;
                const vmark = document.querySelector('.vmark');
                vmark.innerHTML = str;
                vmark.style.display = 'block';
                setTimeout(function() {
                    vmark.style.display = 'none';
                    vmark.innerHTML = '';
                }, 2500);
            }
        }
        });
    </script>
	

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2020 Ghost_LZW
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a>,<a href="http://github.com/wzpan/hexo-theme-freemind/" target="_blank" rel="noopener">Freemind</a>,<a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a> and <a href="http://getbootstrap.com/" target="_blank">BOOTSTRA.386</a>. 
     <br> Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/" target="_blank" rel="noopener">Freemind.386</a>.    
</p>
 </footer>
</div> <!-- container-narrow -->
  
  <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'BDeNfFwDjzz41GphGyrf','2.0.0');
  </script>



  
<a id="gotop" href="#">   
  <span>â¬†ï¸TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



</body>
   </html>
